import{_ as h,b as m,z as f,k as _,O as u,P as y,e as b,o as s,h as I,a as t,K as r,c as p,F as v,E as M,H as i,g as c,v as d,W as V}from"./index-D6WQuHd6.js";const U={class:"grade-wrapper"},k={class:"grade-table"},B={class:"text-center align-middle px-3 py-2"},j={class:"text-center align-middle px-3 py-2"},w={class:"text-center align-middle px-3 py-2"},E=["onUpdate:modelValue"],C=["onUpdate:modelValue"],F=["onUpdate:modelValue"],G=["onUpdate:modelValue"],N=["value"],A=["value"],D={__name:"EnrollmentGrade",setup(T){m([]);const S=f(),g=Number(S.params.courseId);_(async()=>{try{const e=await u.get(`/api/professor/course/${g}/grades`);l.value=e.data}catch(e){console.error("성적 조회 실패:",e)}});const l=m([{enrollmentId:171,major:"컴퓨터공학과",courseId:"180",studentId:"20012",name:"김주현",attendanceScore:0,midtermScore:0,finalScore:0,assignmentScore:0,totalScore:0,grade:""},{enrollmentId:164,major:"전자공학과",courseId:"181",studentId:"20013",name:"김설영",attendanceScore:0,midtermScore:0,finalScore:0,assignmentScore:0,totalScore:0,grade:""},{enrollmentId:165,major:"전자공학과",courseId:"182",studentId:"20014",name:"류지민",attendanceScore:0,midtermScore:0,finalScore:0,assignmentScore:0,totalScore:0,grade:""},{enrollmentId:167,major:"경영학과",courseId:"183",studentId:"20015",name:"남도일",attendanceScore:0,midtermScore:0,finalScore:0,assignmentScore:0,totalScore:0,grade:""},{enrollmentId:169,major:"일본어학과",courseId:"184",studentId:"20016",name:"유미란",attendanceScore:0,midtermScore:0,finalScore:0,assignmentScore:0,totalScore:0,grade:""}]);y(()=>{l.value.forEach(e=>{e.attendanceScore=Math.min(100,Math.max(0,e.attendanceScore)),e.midtermScore=Math.min(100,Math.max(0,e.midtermScore)),e.finalScore=Math.min(100,Math.max(0,e.finalScore)),e.assignmentScore=Math.min(100,Math.max(0,e.assignmentScore));const o=e.attendanceScore*.2+e.midtermScore*.3+e.finalScore*.3+e.assignmentScore*.2;e.totalScore=Math.round(o*100)/100,e.totalScore>=95?e.grade="A+":e.totalScore>=90?e.grade="A":e.totalScore>=85?e.grade="B+":e.totalScore>=80?e.grade="B":e.totalScore>=75?e.grade="C+":e.totalScore>=70?e.grade="C":e.grade="F"})});const x=async()=>{try{for(const e of l.value){const o={enrollmentId:e.enrollmentId,grade:e.totalScore,rank:e.grade,midScore:e.midtermScore,finScore:e.finalScore,attendanceScore:e.attendanceScore,assignmentScore:e.assignmentScore};await u.put("http://localhost:8080/api/professor/course/grade",o)}alert("성적 저장 완료!")}catch(e){console.error(e),alert("저장 실패!")}};return(e,o)=>(s(),b(V,{title:"성적 관리"},{default:I(()=>[t("div",U,[o[1]||(o[1]=t("h2",{class:"text-2xl font-bold mb-4 text-center"}," 성적입력 (출석20%, 중간30%, 기말30%, 과제20%) ",-1)),t("table",k,[o[0]||(o[0]=t("thead",{class:"grade-table-header"},[t("tr",null,[t("th",{class:"px-3 py-2 text-center align-middle"},"학과"),t("th",{class:"px-3 py-2 text-center align-middle"},"학번"),t("th",{class:"px-3 py-2 text-center align-middle"},"이름"),t("th",{class:"px-3 py-2 text-center align-middle"},[r("출석"),t("br"),r("(20%)")]),t("th",{class:"px-3 py-2 text-center align-middle"},[r("중간"),t("br"),r("(30%)")]),t("th",{class:"px-3 py-2 text-center align-middle"},[r("기말"),t("br"),r("(30%)")]),t("th",{class:"px-3 py-2 text-center align-middle"},[r("과제"),t("br"),r("(20%)")]),t("th",{class:"px-3 py-2 text-center align-middle"},[r("총점"),t("br"),r("(%)")]),t("th",{class:"px-3 py-2 text-center align-middle"},"등급")])],-1)),t("tbody",null,[(s(!0),p(v,null,M(l.value,a=>(s(),p("tr",{key:a.enrollmentId},[t("td",B,i(a.major),1),t("td",j,i(a.studentId),1),t("td",w,i(a.name),1),t("td",null,[c(t("input",{type:"number","onUpdate:modelValue":n=>a.attendanceScore=n,class:"form-control"},null,8,E),[[d,a.attendanceScore]])]),t("td",null,[c(t("input",{type:"number","onUpdate:modelValue":n=>a.midtermScore=n,class:"form-control"},null,8,C),[[d,a.midtermScore]])]),t("td",null,[c(t("input",{type:"number","onUpdate:modelValue":n=>a.finalScore=n,class:"form-control"},null,8,F),[[d,a.finalScore]])]),t("td",null,[c(t("input",{type:"number","onUpdate:modelValue":n=>a.assignmentScore=n,class:"form-control"},null,8,G),[[d,a.assignmentScore]])]),t("td",null,[t("input",{type:"text",value:a.totalScore+"%",class:"form-control bg-light",readonly:""},null,8,N)]),t("td",null,[t("input",{type:"text",value:a.grade,class:"form-control bg-light",readonly:""},null,8,A)])]))),128))])]),t("div",{class:"text-center mt-3"},[t("button",{onClick:x,class:"btn btn-primary"},"저장")])])]),_:1}))}},q=h(D,[["__scopeId","data-v-1de31a75"]]);export{q as default};
