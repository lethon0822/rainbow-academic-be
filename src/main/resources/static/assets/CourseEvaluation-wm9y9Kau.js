import{b as o,u as U,z as Q,q as S,k as $,c as r,o as i,a as s,H as n,K as f,X as H,f as p,F as J,E as X,g as G,v as W,J as Y,w as Z,O as w}from"./index-D6WQuHd6.js";const ee={class:"survey-container"},se={class:"course-info"},te={key:0,class:"loading-container"},le={key:1,class:"error-container"},ae={class:"error-message"},oe={key:2,class:"row"},ne={class:"col-md-6"},ue={class:"col-md-6"},re={class:"progress"},ie={class:"text-center text-muted mb-4"},ce={key:0,class:"survey-item"},de={class:"question-header"},ve={class:"question-number"},pe={class:"question-text"},be={class:"rating-container"},me={class:"rating-scale"},ye={class:"rating-label"},_e={class:"rating-input-wrapper"},fe=["name","id","value","data-value","onInput","checked","disabled"],ge={key:1,class:"survey-item"},he={class:"rating-container"},qe=["disabled"],ke={class:"survey-footer"},we=["disabled"],Ie=["disabled"],xe=["disabled"],Ce=["disabled"],Se={key:2,class:"alert alert-success mt-4"},d=5,Ne={__name:"CourseEvaluation",props:{courseId:String},setup(D){const b=o(null),N=o(!0),O=U(),E=D,j=async()=>{var t,e;try{const a=await w.get("/account/check");b.value=a.data,console.log("í˜„ì¬ ì‚¬ìš©ì ID:",b.value)}catch(a){console.error("ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:",a),(((t=a.response)==null?void 0:t.status)===401||!((e=a.response)!=null&&e.data))&&alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.")}finally{N.value=!1}},c=o({q1:null,q2:null,q3:null,q4:null,q5:null}),g=o(0),u=o(!1),m=o(""),l=o(1),L=Q(),I=o(E.courseId||L.query.courseId||""),v=o({course_name:"",professor_name:"",credits:"",evaluation_date:""}),h=o(!0),y=o(null),x=[{number:1,question:"ìˆ˜ì—…ë‚´ìš©ì´ ì²´ê³„ì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆë‹¤."},{number:2,question:"êµìˆ˜ì˜ ê°•ì˜ ì§„í–‰ ì†ë„ê°€ ì ì ˆí•˜ë‹¤."},{number:3,question:"ìˆ˜ì—… ìë£Œ(PPT, êµì¬ ë“±)ê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ ì¤€ë¹„ë˜ì—ˆë‹¤."},{number:4,question:"êµìˆ˜ê°€ í•™ìƒë“¤ì˜ ì§ˆë¬¸ì— ì„±ì‹¤íˆ ë‹µë³€í•´ì¤€ë‹¤."},{number:5,question:"ì´ ê°•ì˜ë¥¼ ë‹¤ë¥¸ í•™ìƒë“¤ì—ê²Œ ì¶”ì²œí•˜ê³  ì‹¶ë‹¤."}],M=[{label:"ë§¤ìš° ê·¸ë ‡ì§€ ì•Šë‹¤",value:1},{label:"ê·¸ë ‡ì§€ ì•Šë‹¤",value:2},{label:"ë³´í†µì´ë‹¤",value:3},{label:"ê·¸ë ‡ë‹¤",value:4},{label:"ë§¤ìš° ê·¸ë ‡ë‹¤",value:5}],P=t=>w.get(`/course/${t}`).catch(e=>e.response),C=async()=>{try{h.value=!0,y.value=null;const t=await P(I.value);if(t&&t.data){const e=t.data;v.value={courseId:e.courseId,title:e.title||e.title||"ê³¼ëª©ëª… ì •ë³´ ì—†ìŒ",credit:e.credit!==void 0?e.credit:"í•™ì  ì •ë³´ ì—†ìŒ",professorName:e.userName||"êµìˆ˜ëª… ì •ë³´ ì—†ìŒ",type:e.type||"ì´ìˆ˜êµ¬ë¶„ ì •ë³´ ì—†ìŒ",classroom:e.classroom||"ê°•ì˜ì‹¤ ì •ë³´ ì—†ìŒ",year:e.year||"ë…„ë„ ì •ë³´ ì—†ìŒ",semester:e.semester||"í•™ê¸° ì •ë³´ ì—†ìŒ",evaluation_date:new Date().toLocaleDateString("ko-KR")}}else throw new Error("ê°•ì˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}catch(t){console.error("ê°•ì˜ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:",t),y.value=t.message||"ê°•ì˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",v.value={courseId:null,title:"ê°•ì˜ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨",credit:"ì •ë³´ ì—†ìŒ",professorName:"ì •ë³´ ì—†ìŒ",type:"ì´ìˆ˜êµ¬ë¶„ ì •ë³´ ì—†ìŒ",classroom:"ì •ë³´ ì—†ìŒ",year:"ì •ë³´ ì—†ìŒ",semester:"ì •ë³´ ì—†ìŒ",evaluation_date:new Date().toLocaleDateString("ko-KR")}}finally{h.value=!1}},q=()=>{const t=Object.values(c.value).filter(e=>e!==null).length;g.value=Math.round(t/d*100)},R=t=>{c.value["q"+l.value]=t,q()},T=()=>{l.value<d+1&&l.value++},V=()=>{l.value>1&&l.value--},z=async()=>{var t;if(!b.value){alert("ì‚¬ìš©ì ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");return}if(Object.values(c.value).every(e=>e!==null)){const e=Object.values(c.value),a=Math.round(e.reduce((_,K)=>_+K,0)/e.length),k={courseId:parseInt(I.value),userId:b.value,review:m.value,average:a};console.log("ì„¤ë¬¸ ê²°ê³¼:",k);try{await w.post("/student/course/survey",k),u.value=!0,alert(`ì„¤ë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!
ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤.`),O.push("/profile")}catch(_){console.error("ì„¤ë¬¸ ì œì¶œ ì‹¤íŒ¨:",_),((t=_.response)==null?void 0:t.status)===401?alert("ë¡œê·¸ì¸ ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”."):alert("ì„¤ë¬¸ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}}else alert("ëª¨ë“  í•„ìˆ˜ í•­ëª©ì— ë‹µë³€í•´ì£¼ì„¸ìš”.")},A=()=>{confirm("ì‘ì„±í•œ ë‚´ìš©ì´ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(Object.keys(c.value).forEach(t=>c.value[t]=null),m.value="",u.value=!1,q(),l.value=1)},B=S(()=>c.value["q"+l.value]!==null),F=S(()=>Object.values(c.value).every(t=>t!==null));return $(async()=>{q(),await Promise.all([j(),C()])}),(t,e)=>(i(),r("div",ee,[e[10]||(e[10]=s("div",{class:"survey-header"},[s("h1",null,"ì¤‘ê°„ê°•ì˜í‰ê°€ ì„¤ë¬¸ì§€")],-1)),s("div",se,[e[6]||(e[6]=s("h5",null,"ğŸ“š ê°•ì˜ ì •ë³´",-1)),h.value?(i(),r("div",te,e[1]||(e[1]=[s("div",{class:"spinner"},null,-1),s("p",null,"ê°•ì˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",-1)]))):y.value?(i(),r("div",le,[s("p",ae,"âš ï¸ "+n(y.value),1),s("button",{onClick:C,class:"btn btn-sm btn-outline-primary"}," ë‹¤ì‹œ ì‹œë„ ")])):(i(),r("div",oe,[s("div",ne,[s("p",null,[e[2]||(e[2]=s("strong",null,"ê³¼ëª©ëª…:",-1)),f(" "+n(v.value.title),1)]),s("p",null,[e[3]||(e[3]=s("strong",null,"ë‹´ë‹¹êµìˆ˜:",-1)),f(" "+n(v.value.professorName),1)])]),s("div",ue,[s("p",null,[e[4]||(e[4]=s("strong",null,"í•™ì :",-1)),f(" "+n(v.value.credit)+"í•™ì ",1)]),s("p",null,[e[5]||(e[5]=s("strong",null,"ì´ìˆ˜êµ¬ë¶„:",-1)),f(" "+n(v.value.type),1)])])]))]),s("div",re,[s("div",{class:"progress-bar",role:"progressbar",style:H({width:g.value+"%"})},null,4)]),s("p",ie," ì§„í–‰ë¥ : "+n(g.value)+"% ("+n(l.value)+"/"+n(d+1)+"ë‹¨ê³„) ",1),s("form",{onSubmit:Z(z,["prevent"]),class:Y({"form-disabled":u.value})},[l.value<=d?(i(),r("div",ce,[s("div",de,[s("div",ve,n(x[l.value-1].number),1),s("div",pe,n(x[l.value-1].question),1)]),s("div",be,[s("div",me,[(i(),r(J,null,X(M,a=>s("div",{key:a.value,class:"rating-option"},[s("div",ye,n(a.label),1),s("div",_e,[s("input",{class:"rating-input",type:"radio",name:"q"+l.value,id:"q"+l.value+"_"+a.value,value:a.value,"data-value":a.value,onInput:k=>R(a.value),checked:c.value["q"+l.value]==a.value,disabled:u.value},null,40,fe)])])),64))])])])):p("",!0),l.value===d+1?(i(),r("div",ge,[e[7]||(e[7]=s("div",{class:"question-header"},[s("div",{class:"question-number"},"ğŸ’¬"),s("div",{class:"question-text"}," ê°•ì˜ì— ëŒ€í•œ ì¶”ê°€ ì˜ê²¬ì´ë‚˜ ê°œì„ ì‚¬í•­ì´ ìˆë‹¤ë©´ ììœ ë¡­ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”. ")],-1)),s("div",he,[G(s("textarea",{class:"form-control opinion-textarea",rows:"6",placeholder:"ê°•ì˜ ê°œì„ ì„ ìœ„í•œ ì˜ê²¬ì„ ììœ ë¡­ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”...","onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),disabled:u.value},null,8,qe),[[W,m.value]])])])):p("",!0),s("div",ke,[s("button",{type:"button",class:"btn btn-outline-secondary btn-lg me-3",onClick:V,disabled:l.value===1||u.value}," â† ì´ì „ ",8,we),l.value<=d?(i(),r("button",{key:0,type:"button",class:"btn btn-primary btn-lg",onClick:T,disabled:!B.value||u.value}," ë‹¤ìŒ â†’ ",8,Ie)):p("",!0),l.value===d+1?(i(),r("button",{key:1,type:"submit",class:"btn btn-success btn-lg",disabled:u.value||!F.value}," ğŸ“ ì„¤ë¬¸ ì œì¶œ ",8,xe)):p("",!0),s("button",{type:"button",class:"btn btn-outline-secondary btn-lg ms-3",onClick:A,disabled:u.value}," ğŸ”„ ë‹¤ì‹œ ì‘ì„± ",8,Ce),e[8]||(e[8]=s("p",{class:"text-muted mt-3 mb-0"}," ìµëª…ìœ¼ë¡œ ì œì¶œë˜ë©°, ê°•ì˜ ê°œì„ ì— ì†Œì¤‘í•œ ìë£Œë¡œ í™œìš©ë©ë‹ˆë‹¤. ",-1))]),u.value?(i(),r("div",Se,e[9]||(e[9]=[s("h4",null,"ğŸ‰ ì œì¶œ ì™„ë£Œ!",-1),s("p",null," ì„¤ë¬¸ì— ì°¸ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë” ë‚˜ì€ ê°•ì˜ë¥¼ ìœ„í•´ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë°˜ì˜í•˜ê² ìŠµë‹ˆë‹¤. ",-1)]))):p("",!0)],34)]))}};export{Ne as default};
