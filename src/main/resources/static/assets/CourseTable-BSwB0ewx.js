import{_ as N,a as V,t as I,c as o,o as n,b as t,e as p,D as b,g as y,v as w,M as _,H as i,F as k,E as S,G as B,V as M,u as U,B as F,J as C,C as L,h as D,P as j}from"./index-BYEgPVgA.js";const T={class:"filter-bar"},A={class:"filter-group"},E={key:0,class:"number-input-wrapper"},H={key:1,class:"number-input-wrapper"},J=["min","max"],O={class:"spinner-buttons"},z={class:"filter-group"},G=["disabled"],P=["value"],R={key:0,class:"filter-group"},Y={key:1,class:"filter-group"},q=["disabled"],K=["value"],Q={key:1,value:"교양학부"},W={key:2,class:"filter-group"},X=["disabled"],Z={class:"filter-group keyword-wrapper"},tt={__name:"SearchFilterBar",props:{state:Boolean,departments:Array,semester:String,enrollment:Boolean},emits:["search"],setup(v,{emit:d}){const h=d,u=v;let m=new Date().getFullYear(),f=u.enrollment;const l=V({year:"",type:"",departmentName:"",grade:"",semester:"",keyword:""});l.year=m;const r=()=>{l.year<m-4&&(l.year=m-4),h("search",{...l})};return l.semester=u.semester||"",I(()=>l.type,a=>{a==="교양"?l.departmentName="교양학부":l.departmentName=""}),(a,s)=>(n(),o("div",T,[t("div",A,[s[9]||(s[9]=t("label",null,"연도",-1)),b(f)?(n(),o("div",E,[y(t("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=e=>l.year=e),class:"number-input",disabled:"",readonly:""},null,512),[[w,l.year]])])):(n(),o("div",H,[y(t("input",{type:"number",min:b(m)-5,max:b(m),step:"1","onUpdate:modelValue":s[1]||(s[1]=e=>l.year=e),class:"number-input",readonly:""},null,8,J),[[w,l.year]]),t("div",O,[t("button",{type:"button",class:"spinner-btn spinner-up",onClick:s[2]||(s[2]=e=>l.year=Math.min(l.year+1,b(m)))}," ▲ "),t("button",{type:"button",class:"spinner-btn spinner-down",onClick:s[3]||(s[3]=e=>l.year=Math.max(l.year-1,b(m)-5))}," ▼ ")])]))]),t("div",z,[s[13]||(s[13]=t("label",null,"학기",-1)),y(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>l.semester=e),class:"select-input",disabled:u.semester},[u.semester?(n(),o("option",{key:0,value:u.semester},i(u.semester)+"학기",9,P)):(n(),o(k,{key:1},[s[10]||(s[10]=t("option",{value:""},"전체",-1)),s[11]||(s[11]=t("option",{value:"1"},"1학기",-1)),s[12]||(s[12]=t("option",{value:"2"},"2학기",-1))],64))],8,G),[[_,l.semester]])]),u.state?(n(),o("div",R,[s[15]||(s[15]=t("label",null,"이수구분",-1)),y(t("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>l.type=e),class:"select-input"},s[14]||(s[14]=[t("option",{value:""},"전체",-1),t("option",{value:"전공"},"전공",-1),t("option",{value:"교양"},"교양",-1)]),512),[[_,l.type]])])):p("",!0),u.state?(n(),o("div",Y,[s[17]||(s[17]=t("label",null,"학과",-1)),y(t("select",{"onUpdate:modelValue":s[6]||(s[6]=e=>l.departmentName=e),disabled:l.type==="교양",class:"select-input wide"},[s[16]||(s[16]=t("option",{value:""},"전체",-1)),l.type!=="교양"?(n(!0),o(k,{key:0},S(u.departments,e=>(n(),o("option",{key:e.departmentName,value:e.departmentName},i(e.departmentName),9,K))),128)):(n(),o("option",Q,"교양학부"))],8,q),[[_,l.departmentName]])])):p("",!0),u.state?(n(),o("div",W,[s[19]||(s[19]=t("label",null,"학년",-1)),y(t("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>l.grade=e),disabled:l.type==="교양",class:"select-input"},s[18]||(s[18]=[B('<option value="" data-v-4bba24da>전체</option><option value="1" data-v-4bba24da>1학년</option><option value="2" data-v-4bba24da>2학년</option><option value="3" data-v-4bba24da>3학년</option><option value="4" data-v-4bba24da>4학년</option>',5)]),8,X),[[_,l.grade]])])):p("",!0),t("div",Z,[s[20]||(s[20]=t("label",null,"교과목명",-1)),y(t("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=e=>l.keyword=e),placeholder:"교과목명을 입력하세요",class:"text-input"},null,512),[[w,l.keyword]]),t("button",{onClick:r,class:"btn btn-success"},"조회")])]))}},Et=N(tt,[["__scopeId","data-v-4bba24da"]]),et={class:"table-container"},st={class:"table-wrapper"},ot={key:0,class:"professor"},nt={key:1,class:"remStd"},lt={key:2,class:"enroll-action"},at={key:3,class:"status"},dt={key:4,class:"button"},rt={class:"code"},it={class:"deptName"},pt={key:0},ut={key:1},mt={class:"title"},ct=["onClick"],yt={class:"classroom"},bt={class:"type"},_t={key:0,class:"professor"},kt={key:1},vt={key:2,class:"grade"},ht={class:"time"},ft={class:"credit"},wt={class:"maxStd"},$t={class:"remaining-count"},gt={key:4,class:"remStd"},Ct={class:"remaining-count"},Nt={key:5,class:"enroll-action"},St=["disabled","onClick"],xt={key:6,class:"enroll-action"},Vt=["onClick"],It={key:7,class:"button"},Bt=["onClick"],Mt={key:8,class:"button"},Ut=["onClick"],Ft={key:0,class:"button"},Lt={key:10,class:"button"},Dt=["onClick"],jt=["onClick"],Tt={__name:"CourseTable",props:{courseList:Array,maxHeight:{type:String,default:"700px"},show:{type:Object,default:()=>({professorName:!1,remStd:!1,enroll:!1,cancel:!1,deptName:!0,setting:!1,modify:!1,approve:!1})}},emits:["enroll","cancel","check"],setup(v){const d=v,h=r=>r==="거부"?"gray":r==="승인"?"blue":"red",u=M("openModal"),$=r=>u(r),m=U(),f=(r,a)=>{const s=JSON.stringify(a);m.push({path:`/professor/course/${r}/students`,state:{data:s}})},l=async(r,a,s=0)=>{try{const e={courseId:r,status:a,userId:s},c=await j.patch("/staff/approval/course",e);if(c.status===200){alert(`강의가 ${a} 처리되었습니다.`);const g=d.courseList.find(x=>x.courseId===r);g&&(g.status=a)}else console.error("응답 오류:",c),alert("승인/거부 실패 (서버 응답 오류)")}catch(e){console.error("승인/거부 실패:",e),alert("처리 중 오류가 발생했습니다.")}};return(r,a)=>{const s=F("router-link");return n(),o("div",et,[t("div",st,[t("table",null,[t("thead",null,[t("tr",null,[a[0]||(a[0]=t("th",{class:"code"},"과목코드",-1)),a[1]||(a[1]=t("th",{class:"deptName"},"학과",-1)),a[2]||(a[2]=t("th",{class:"title"},"교과목명",-1)),a[3]||(a[3]=t("th",{class:"classroom"},"강의실",-1)),a[4]||(a[4]=t("th",{class:"type"},"이수구분",-1)),d.show.professorName?(n(),o("th",ot,"담당교수")):p("",!0),a[5]||(a[5]=t("th",{class:"grade"},"수강대상",-1)),a[6]||(a[6]=t("th",{class:"time"},"강의시간",-1)),a[7]||(a[7]=t("th",{class:"credit"},"학점",-1)),a[8]||(a[8]=t("th",{class:"maxStd"},"정원",-1)),d.show.remStd?(n(),o("th",nt,"잔여")):p("",!0),d.show.enroll||d.show.cancel?(n(),o("th",lt," 수강 ")):p("",!0),d.show.modify?(n(),o("th",at,"승인여부")):p("",!0),d.show.setting||d.show.modify||d.show.check?(n(),o("th",dt)):p("",!0)])]),t("tbody",null,[(n(!0),o(k,null,S(d.courseList,e=>(n(),o("tr",{key:e.courseId},[t("td",rt,i(e.courseCode),1),t("td",it,[e.type==="교양"?(n(),o("div",pt,"교양학부")):(n(),o("div",ut,i(e.deptName),1))]),t("td",mt,[t("div",{onClick:c=>$(e.courseId),class:"link"},i(e.title),9,ct)]),t("td",yt,i(e.classroom),1),t("td",bt,i(e.type),1),d.show.professorName?(n(),o("td",_t,i(e.professorName),1)):p("",!0),e.grade===0?(n(),o("td",kt,"수강희망자")):(n(),o("td",vt,i(e.deptName+" "+e.grade)+"학년 ",1)),t("td",ht,i(e.time),1),t("td",ft,i(e.credit),1),t("td",wt,[t("span",$t,i(e.maxStd),1)]),d.show.modify?(n(),o("td",{key:3,class:C(["status",h(e.status)])},i(e.status),3)):p("",!0),d.show.remStd?(n(),o("td",gt,[t("span",Ct,i(e.remStd),1)])):p("",!0),d.show.enroll?(n(),o("td",Nt,[t("button",{class:C(["enroll-btn",{enrolled:e.enrolled}]),disabled:e.enrolled,onClick:c=>r.$emit("enroll",e)},i(e.enrolled?"신청완료":"수강신청"),11,St)])):d.show.cancel?(n(),o("td",xt,[t("button",{class:"cancel-btn",onClick:c=>r.$emit("cancel",e.courseId)}," 수강취소 ",8,Vt)])):d.show.setting?(n(),o("td",It,[t("button",{class:"enroll-btn",onClick:c=>f(e.courseId,e)}," 관리 ",8,Bt)])):d.show.check?(n(),o("td",Mt,[t("button",{class:"enroll-btn",onClick:c=>r.$emit("check",e.courseId,e.title)}," 강의평 보기 ",8,Ut)])):d.show.modify?(n(),o(k,{key:9},[e.status!=="승인"?(n(),o("td",Ft,[L(s,{to:{name:"ModifyCourse",params:{id:e.courseId}},class:"setting"},{default:D(()=>a[9]||(a[9]=[t("button",{class:"enroll-btn d-flex"},"수정",-1)])),_:2,__:[9]},1032,["to"])])):p("",!0)],64)):p("",!0),d.show.approve?(n(),o("td",Lt,[t("button",{class:"enroll-btn",onClick:c=>l(e.courseId,"승인")}," 승인 ",8,Dt),t("button",{class:"cancel-btn",onClick:c=>l(e.courseId,"거부")}," 거부 ",8,jt)])):p("",!0)]))),128))])])])])}}},Ht=N(Tt,[["__scopeId","data-v-4a3bdce8"]]);export{Ht as C,Et as S};
