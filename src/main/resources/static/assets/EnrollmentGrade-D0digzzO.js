import{_,u as v,b as I,d as y,m as M,e as V,o as p,i as U,a as t,g as r,c as h,F as w,G as B,I as d,h as i,v as u,W as k,O as f}from"./index-COq8Ttir.js";const N={class:"container mt-4"},C={class:"grade-table"},G=["onUpdate:modelValue","onInput"],S=["onUpdate:modelValue","onInput"],$=["onUpdate:modelValue","onInput"],E=["onUpdate:modelValue","onInput"],F={class:"text-center mt-4"},J=["disabled"],O={__name:"EnrollmentGrade",setup(A){const b=v(),m=I(!1),s=y({data:[],courseId:""});console.log("받은 데이터",s.data);const c=n=>(n.attendance||0)*.2+(n.midterm||0)*.3+(n.final||0)*.3+(n.assignment||0)*.2,g=n=>n>=95?"A+":n>=90?"A":n>=85?"B+":n>=80?"B":n>=75?"C+":n>=70?"C":"F";M(()=>{const n=history.state.data,o=history.state.id,e=JSON.parse(n),a=JSON.parse(o);s.data=e.map(l=>({...l,attendance:l.attendance!==void 0?l.attendance:0,midterm:l.midterm!==void 0?l.midterm:0,final:l.final!==void 0?l.final:0,assignment:l.assignment!==void 0?l.assignment:0})),s.courseId=a,console.log("학생 목록(history):",s.data),console.log("코스 아이디:",s.courseId)});const x=async()=>{m.value=!0;try{for(const n of s.data){const o={enrollmentId:n.enrollmentId,attendance:n.attendance||0,midterm:n.midterm||0,final:n.final||0,assignment:n.assignment||0,total:c(n)},{data:e}=await f.post("/professor/grade/check/exist",o);e===0?await f.post("/professor/grade/save",o):await f.put("/professor/grade/update",o)}alert("성적 저장 완료!"),await b.push("/professor/grade")}catch(n){console.error("성적 저장 오류:",n),alert("성적 저장 중 오류가 발생했습니다.")}finally{m.value=!1}};return(n,o)=>(p(),V(k,{title:"성적 관리"},{default:U(()=>[t("div",N,[o[1]||(o[1]=t("h2",{class:"text-center fw-bold mb-4"},"성적 입력창",-1)),o[2]||(o[2]=t("h3",{class:"text-2xl font-bold mb-4 text-center"}," 성적입력 (출석20%, 중간30%, 기말30%, 과제20%) ",-1)),t("table",C,[o[0]||(o[0]=t("thead",null,[t("tr",null,[t("th",null,"이름"),t("th",null,"학번"),t("th",null,"학과"),t("th",null,[r("출석"),t("br"),r("(20%)")]),t("th",null,[r("중간"),t("br"),r("(30%)")]),t("th",null,[r("기말"),t("br"),r("(30%)")]),t("th",null,[r("과제"),t("br"),r("(20%)")]),t("th",null,"총점"),t("th",null,"등급")])],-1)),t("tbody",null,[(p(!0),h(w,null,B(s.data,e=>(p(),h("tr",{key:e.enrollmentId},[t("td",null,d(e.userName),1),t("td",null,d(e.loginId),1),t("td",null,d(e.deptName),1),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.attendance=a,type:"number",min:"0",max:"100",onInput:a=>e.attendance=Math.min(100,Math.max(0,e.attendance)),class:"form-control"},null,40,G),[[u,e.attendance,void 0,{number:!0}]])]),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.midterm=a,type:"number",min:"0",max:"100",onInput:a=>e.midterm=Math.min(100,Math.max(0,e.midterm)),class:"form-control"},null,40,S),[[u,e.midterm,void 0,{number:!0}]])]),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.final=a,type:"number",min:"0",max:"100",onInput:a=>e.final=Math.min(100,Math.max(0,e.final)),class:"form-control"},null,40,$),[[u,e.final,void 0,{number:!0}]])]),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.assignment=a,type:"number",min:"0",max:"100",onInput:a=>e.assignment=Math.min(100,Math.max(0,e.assignment)),class:"form-control"},null,40,E),[[u,e.assignment,void 0,{number:!0}]])]),t("td",null,d(c(e)),1),t("td",null,d(g(c(e))),1)]))),128))])]),t("div",F,[t("button",{onClick:x,disabled:m.value,class:"btn btn-success px-4"}," 성적 저장 ",8,J)])])]),_:1}))}},L=_(O,[["__scopeId","data-v-48fea1ef"]]);export{L as default};
