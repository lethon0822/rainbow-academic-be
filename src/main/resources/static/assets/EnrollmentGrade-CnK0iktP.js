import{_ as g,u as v,b as I,d as y,m as M,e as V,o as p,i as U,a as t,g as r,c as h,F as w,G as k,I as s,h as i,v as u,W as B,O as f}from"./index-BTGqJK0i.js";const N={class:"container mt-4"},G={class:"grade-table"},S=["onUpdate:modelValue","onInput"],C=["onUpdate:modelValue","onInput"],$=["onUpdate:modelValue","onInput"],D=["onUpdate:modelValue","onInput"],E={class:"text-center mt-4"},F=["disabled"],J={__name:"EnrollmentGrade",setup(O){const b=v(),m=I(!1),d=y({data:[],courseId:""}),c=n=>(n.midterm||0)+(n.final||0)+(n.assignment||0)+(n.attendance||0),x=n=>n>=90?"A":n>=80?"B":n>=70?"C":n>=60?"D":"F";M(()=>{const n=history.state.data,o=history.state.id,e=JSON.parse(n),a=JSON.parse(o);d.data=e.map(l=>({...l,attendance:l.attendance!==void 0?l.attendance:0,midterm:l.midterm!==void 0?l.midterm:0,final:l.final!==void 0?l.final:0,assignment:l.assignment!==void 0?l.assignment:0})),d.courseId=a,console.log("학생 목록(history):",d.data),console.log("코스 아이디:",d.courseId)});const _=async()=>{m.value=!0;try{for(const n of d.data){const o={enrollmentId:n.enrollmentId,attendance:n.attendance||0,midterm:n.midterm||0,final:n.final||0,assignment:n.assignment||0,total:c(n)},{data:e}=await f.post("/professor/grade/check/exist",o);e===0?await f.post("/professor/grade/save",o):await f.put("/professor/grade/update",o)}alert("성적 저장 완료!"),await b.push("/professor/grade")}catch(n){console.error("성적 저장 오류:",n),alert("성적 저장 중 오류가 발생했습니다.")}finally{m.value=!1}};return(n,o)=>(p(),V(B,{title:"성적 관리"},{default:U(()=>[t("div",N,[o[1]||(o[1]=t("h2",{class:"text-center fw-bold mb-4"},"성적 입력창",-1)),o[2]||(o[2]=t("h3",{class:"text-2xl font-bold mb-4 text-center"}," 성적입력 (출석20%, 중간30%, 기말30%, 과제20%) ",-1)),t("table",G,[o[0]||(o[0]=t("thead",null,[t("tr",null,[t("th",null,"이름"),t("th",null,"학번"),t("th",null,"학과"),t("th",null,[r("출석"),t("br"),r("(20%)")]),t("th",null,[r("중간"),t("br"),r("(30%)")]),t("th",null,[r("기말"),t("br"),r("(30%)")]),t("th",null,[r("과제"),t("br"),r("(20%)")]),t("th",null,"총점"),t("th",null,"등급")])],-1)),t("tbody",null,[(p(!0),h(w,null,k(d.data,e=>(p(),h("tr",{key:e.enrollmentId},[t("td",null,s(e.userName),1),t("td",null,s(e.loginId),1),t("td",null,s(e.departmentName),1),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.attendance=a,type:"number",min:"0",max:"100",onInput:a=>e.attendance=Math.min(100,Math.max(0,e.attendance)),class:"form-control"},null,40,S),[[u,e.attendance,void 0,{number:!0}]])]),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.midterm=a,type:"number",min:"0",max:"100",onInput:a=>e.midterm=Math.min(100,Math.max(0,e.midterm)),class:"form-control"},null,40,C),[[u,e.midterm,void 0,{number:!0}]])]),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.final=a,type:"number",min:"0",max:"100",onInput:a=>e.final=Math.min(100,Math.max(0,e.final)),class:"form-control"},null,40,$),[[u,e.final,void 0,{number:!0}]])]),t("td",null,[i(t("input",{"onUpdate:modelValue":a=>e.assignment=a,type:"number",min:"0",max:"100",onInput:a=>e.assignment=Math.min(100,Math.max(0,e.assignment)),class:"form-control"},null,40,D),[[u,e.assignment,void 0,{number:!0}]])]),t("td",null,s(c(e)),1),t("td",null,s(x(c(e))),1)]))),128))])]),t("div",E,[t("button",{onClick:_,disabled:m.value,class:"btn btn-success px-4"}," 성적 저장 ",8,F)])])]),_:1}))}},T=g(J,[["__scopeId","data-v-1ead346d"]]);export{T as default};
