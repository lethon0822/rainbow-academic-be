import{_ as C,c as i,o as u,a as t,F as m,G as y,I as l,b as v,k as p,s as f,m as b,e as k,i as P,D as B,W as E}from"./index-DOBXMv_I.js";import{G as I}from"./GradeService-6zaUGRCx.js";const x={class:"override-whitebox-margin"},N={class:"table-container"},S={class:"fixed_headers"},q={class:"index"},w={class:"grade"},A={class:"semester"},j={class:"courseCode"},$={class:"title"},F={class:"credit"},D={class:"rank"},M={class:"type"},R={class:"table-container"},T={class:"fixed_headers"},V={class:"table-container"},W={class:"fixed_headers"},L={__name:"PutAllGrades",props:["grades","creditByCategory","semesterGrades"],setup(h){return(c,n)=>(u(),i("div",x,[n[3]||(n[3]=t("h4",null,"과목별 성적",-1)),t("div",N,[t("table",S,[n[0]||(n[0]=t("thead",null,[t("tr",null,[t("th",{class:"index"},"순번"),t("th",{class:"grade"},"학년"),t("th",{class:"semester"},"학기"),t("th",{class:"courseCode"},"과목코드"),t("th",null,"교과목명"),t("th",{class:"credit"},"학점"),t("th",{class:"rank"},"등급"),t("th",{class:"type"},"이수구분")])],-1)),t("tbody",null,[(u(!0),i(m,null,y(h.grades,(r,d)=>(u(),i("tr",{key:d},[t("td",q,l(d+1),1),t("td",w,l(r.grade),1),t("td",A,l(r.semester),1),t("td",j,l(r.courseCode),1),t("td",$,l(r.title),1),t("td",F,l(r.credit),1),t("td",D,l(r.rank||"-"),1),t("td",M,l(r.type),1)]))),128))])])]),n[4]||(n[4]=t("h4",null,"이수구분별 취득학점",-1)),t("div",R,[t("table",T,[n[1]||(n[1]=t("thead",null,[t("tr",null,[t("th",null,"순번"),t("th",null,"학년"),t("th",null,"학기"),t("th",null,"전공필수"),t("th",null,"전공선택"),t("th",null,"교양")])],-1)),t("tbody",null,[(u(!0),i(m,null,y(h.creditByCategory,(r,d)=>(u(),i("tr",{key:d},[t("td",null,l(d+1),1),t("td",null,l(r.grade),1),t("td",null,l(r.semester),1),t("td",null,l(r.majorRequired),1),t("td",null,l(r.majorElective),1),t("td",null,l(r.generalEducation),1)]))),128))])])]),n[5]||(n[5]=t("h4",null,"학기별 성적",-1)),t("div",V,[t("table",W,[n[2]||(n[2]=t("thead",null,[t("tr",null,[t("th",null,"순번"),t("th",null,"학년"),t("th",null,"학기"),t("th",null,"신청학점"),t("th",null,"취득학점"),t("th",null,"평균점수"),t("th",null,"평균평점"),t("th",null,"석차"),t("th",null,"인원")])],-1)),t("tbody",null,[(u(!0),i(m,null,y(h.semesterGrades,(r,d)=>(u(),i("tr",{key:d},[t("td",null,l(d+1),1),t("td",null,l(r.grade),1),t("td",null,l(r.semester),1),t("td",null,l(r.requestedCredits),1),t("td",null,l(r.acquiredCredits),1),t("td",null,l(r.avgScore),1),t("td",null,l(r.avgGradePoint),1),t("td",null,l(r.grading),1),t("td",null,l(r.totalStudents),1)]))),128))])])])]))}},U=C(L,[["__scopeId","data-v-04cd8003"]]),z={class:"content"},H={__name:"GetAllGrades",setup(h){const c=v([]),n=p(),r=Number(n.userId);if(!r||isNaN(r))throw new Error(`userId가 유효하지 않습니다: ${n.userId}`);const d=f(()=>{const o=[];return c.value.forEach(s=>{const e=o.find(a=>a.grade===s.grade&&a.semester===s.semester);e?s.type==="전공필수"||s.type==="전공"?e.majorRequired+=s.credit||0:s.type==="전공선택"?e.majorElective+=s.credit||0:s.type==="교양"&&(e.generalEducation+=s.credit||0):o.push({grade:s.grade,semester:s.semester,majorRequired:(s.type==="전공필수"||s.type==="전공")&&s.credit||0,majorElective:s.type==="전공선택"&&s.credit||0,generalEducation:s.type==="교양"&&s.credit||0})}),o}),g=f(()=>{const o=new Map;c.value.forEach(e=>{const a=`${e.grade}-${e.semester}`;o.has(a)||o.set(a,{grade:e.grade,semester:e.semester,acquiredCredits:0,requestedCredits:0,totalGradePoint:0,count:0,avgScore:0,avgGradePoint:0,grading:1,totalStudents:30});const _=o.get(a);_.acquiredCredits+=e.credit||0,_.requestedCredits+=e.credit||0;const G={"A+":4.5,A:4,"B+":3.5,B:3,"C+":2.5,C:2,D:1.5,F:0}[e.rank]??0;_.totalGradePoint+=G,_.count++});const s=[];return o.forEach(e=>{e.avgGradePoint=e.count?(e.totalGradePoint/e.count).toFixed(2):0,e.avgScore=(e.avgGradePoint*20).toFixed(1),delete e.totalGradePoint,delete e.count,s.push(e)}),s.sort((e,a)=>e.grade===a.grade?Number(e.semester)-Number(a.semester):e.grade-a.grade)});return b(async()=>{try{const o=p(),s=Number(o.userId);if(!s||isNaN(s))throw new Error(`userId가 유효하지 않습니다: ${o.userId}`);const e=await I(s);c.value=e.data||[]}catch(o){console.error("API 호출 실패:",o)}}),(o,s)=>(u(),k(E,{title:"영구성적조회"},{default:P(()=>[t("div",z,[B(U,{grades:c.value,creditByCategory:d.value,semesterGrades:g.value},null,8,["grades","creditByCategory","semesterGrades"])])]),_:1}))}},Q=C(H,[["__scopeId","data-v-d9dd4245"]]);export{Q as default};
