import{_ as h,u as _,b as i,d as x,m as y,e as I,o as r,i as k,a as t,h as d,v as p,c as m,F as w,G as g,I as f,N as V,W as B,O as u}from"./index-BTGqJK0i.js";const N={class:"container mt-4"},U={class:"mb-3"},D={class:"attendance-table"},S=["onUpdate:modelValue"],A=["onUpdate:modelValue","disabled"],J={__name:"Attendance",setup(M){const v=_(),n=i(""),o=x({data:[],courseId:""});y(async()=>{const s=history.state.data,e=history.state.id,a=JSON.parse(s);o.data=a;const l=JSON.parse(e);o.courseId=l,console.log("스테이트데이타:",o.data),console.log("라우팅 아이디:",o.courseId)});const c=i(!1),b=async()=>{if(!n.value){alert("출결일자를 선택해주세요.");return}c.value=!0;try{for(const s of students.value){if(!s.status){alert(`학생 ${s.name}의 출결 상태를 선택해주세요.`);return}const e={attendDate:n.value,enrollmentId:s.enrollmentId,status:s.status,note:s.note},{data:a}=await u.post("/professor/course/check/exist",e);a===0?await u.post("/professor/course/check",e):await u.put("/professor/course/check",e)}alert("출결 저장 완료!"),await v.push("/professor/attendance")}catch(s){console.error("출결 저장 중 오류:",s),alert("출결 저장 중 오류가 발생했습니다.")}finally{c.value=!1}};return(s,e)=>(r(),I(B,{title:"출결 관리"},{default:k(()=>[t("div",N,[e[4]||(e[4]=t("h2",{class:"text-center fw-bold mb-4"},"출결 입력창",-1)),t("div",U,[e[1]||(e[1]=t("label",{class:"form-label"},"출결일자",-1)),d(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),class:"form-control w-25"},null,512),[[p,n.value]])]),t("table",D,[e[3]||(e[3]=t("thead",{class:"grade-table-header"},[t("tr",null,[t("th",null,"이름"),t("th",null,"학번"),t("th",null,"출결 상태"),t("th",null,"비고")])],-1)),t("tbody",null,[(r(!0),m(w,null,g(o.data,a=>(r(),m("tr",{key:a.enrollmentId},[t("td",null,f(a.userName),1),t("td",null,f(a.loginId),1),t("td",null,[d(t("select",{"onUpdate:modelValue":l=>a.status=l,class:"form-select"},e[2]||(e[2]=[t("option",{disabled:"",value:""},"선택",-1),t("option",{value:"출석"},"출석",-1),t("option",{value:"지각"},"지각",-1),t("option",{value:"결석"},"결석",-1),t("option",{value:"병가"},"병가",-1),t("option",{value:"경조사"},"경조사",-1)]),8,S),[[V,a.status]])]),t("td",null,[d(t("input",{"onUpdate:modelValue":l=>a.note=l,disabled:!["지각","병가","경조사"].includes(a.status),class:"form-control",placeholder:"사유 입력"},null,8,A),[[p,a.note]])])]))),128))])]),t("div",{class:"text-center mt-4"},[t("button",{onClick:b,class:"btn btn-primary px-4"}," 저장! ")])])]),_:1}))}},C=h(J,[["__scopeId","data-v-e9ff24a4"]]);export{C as default};
