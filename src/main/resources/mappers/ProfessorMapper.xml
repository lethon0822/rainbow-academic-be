<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rainbowuniv.academicmenagmentbe.professor.ProfessorMapper">

    <!-- 강의 등록   -->
    <insert id="saveCourse">
        INSERT INTO course
        SET user_id= #{userId}
        ,classroom = #{classroom}
        ,type = #{type}
        ,semester = #{semester}
        ,time = #{time}
        ,title = #{title}
        ,credit = #{credit}
        ,week_plan = #{weekPlan}
        ,evaluation = #{evaluation}
        ,text_book = #{textBook}
        ,goal = #{goal}
        ,max_std = #{maxStd}
    </insert>

    <select id="findByUserId">
        SELECT course_id, classroom, type, semester, time, title, credit, max_std, d.dept_name, u.name
        FROM course c
        join user u
          on c.user_id = u.user_id
        join professor p
          on c.user_id = p.user_id
        join department d
          on p.dept_id = d.dept_id
        WHERE c.user_id = #{userId}
        <if test="year != null and year !=''">
            ,year = #{year}
        </if>
        <if test="semester != null and semester !=''">
            ,semester = #{semester}
        </if>
        ORDER BY title ASC, year DESC
    </select>
    
    <update id="modify">
        UPDATE course
        SET classroom = #{classroom}
        ,type = #{type}
        ,semester = #{semester}
        ,time = #{time}
        ,title = #{title}
        ,credit = #{credit}
        ,week_plan = #{weekPlan}
        ,evaluation = #{evaluation}
        ,text_book = #{textBook}
        ,goal = #{goal}
        ,max_std = #{maxStd}
        WHERE course_id = #{courseId}
    </update>


</mapper>