<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rainbowuniv.academicmenagmentbe.enrollmentgrade.EnrollmentGradeMapper">

<!--  성적기입(수정)  -->
    <update id="enrollmentGrade">
        UPDATE enrollment
        SET mid_score = #{midScore}
        ,fin_score = #{finScore}
        ,attendance_score = #{attendanceScore}
        ,assignment_score = #{assignmentScore}
        ,rank = #{rank}
        WHERE enrollment_id = #{enrollmentId}

    </update>

    <select id="getStudentsByCourseId">
        SELECT
        u.login_id,
        u.user_name,
        d.name AS department_name,
        e.enrollment_id
        FROM enrollment e
        JOIN student s ON e.student_id = s.student_id
        JOIN user u ON s.student_id = u.user_id
        JOIN department d ON u.department_id = d.department_id
        WHERE e.course_id = #{courseId}
    </select>


</mapper>